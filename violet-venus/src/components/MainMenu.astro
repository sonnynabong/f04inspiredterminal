---
interface Props {
  activeItem?: "projects" | "skills" | "about" | "comms" | "";
  embedded?: boolean;
}

const { activeItem = "", embedded = false } = Astro.props;

const menuItems = [
  { id: "projects", label: "[ PROJECTS ]", icon: "folder" },
  { id: "skills", label: "[ SKILLS_DB ]", icon: "memory" },
  { id: "about", label: "[ ABOUT_USER ]", icon: "person" },
  { id: "comms", label: "[ COMMS_LINK ]", icon: "mail" },
] as const;
---

<nav class:list={[
  "w-full flex flex-col flex-1 min-h-0 overflow-hidden",
  embedded ? "border-0 bg-transparent p-0" : "lg:w-1/3 border-b-2 lg:border-b-0 lg:border-r-2 border-[#13ec13]/30 p-6 bg-[#0c160c]"
]}>
  {embedded ? (
    <div class="bg-[#13ec13]/10 p-3 border-b border-[#13ec13]/30 flex justify-between items-center shrink-0">
      <h2 class="font-bold tracking-widest text-glow">MAIN_MENU</h2>
      <span class="text-xs bg-[#13ec13] text-[#020502] px-1 font-bold rounded">NAV</span>
    </div>
  ) : (
    <div class="text-sm font-bold tracking-widest border-b border-[#13ec13]/30 pb-2 mb-2 opacity-80">
      &gt; MAIN_MENU_SELECTION
    </div>
  )}
  <ul class="flex flex-col gap-2 overflow-y-auto flex-1 p-2 min-h-0 shrink">
    {menuItems.map((item) => (
      <li class="group">
        <button
          type="button"
          data-nav={item.id}
          class:list={[
            "press-feedback w-full text-left px-4 py-3 border border-[#13ec13] text-[#13ec13] transition-colors duration-0 uppercase font-bold tracking-widest flex items-center justify-between group-hover:shadow-[0_0_10px_rgba(19,236,19,0.5)]",
            activeItem === item.id ? "bg-[#13ec13] text-[#020502]" : "hover:bg-[#13ec13] hover:text-[#020502]"
          ]}
        >
          <span>{item.label}</span>
          <span class="material-symbols-outlined opacity-0 group-hover:opacity-100">chevron_right</span>
        </button>
      </li>
    ))}
  </ul>
  <div class={embedded ? "mt-auto shrink-0 p-3 border-t border-[#13ec13]/30" : "mt-auto"}>
    <div class="h-32 w-full border border-[#13ec13]/30 p-2 flex items-center justify-center relative overflow-hidden bg-[#13ec13]/5">
      <div class="absolute inset-0 opacity-20" style="background-image: repeating-linear-gradient(45deg, #13ec13 0, #13ec13 1px, transparent 0, transparent 50%); background-size: 10px 10px;"></div>
      <div class="text-center z-10">
        <span class="material-symbols-outlined text-5xl mb-2">fingerprint</span>
        <p class="text-[10px] tracking-widest">BIOMETRIC SCAN: MATCH</p>
      </div>
    </div>
  </div>
</nav>
