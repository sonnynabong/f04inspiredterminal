---
interface Props {
  showScanlineBar?: boolean;
  intensity?: "low" | "medium" | "high";
}

const { showScanlineBar = true, intensity = "medium" } = Astro.props;
const opacityClass = intensity === "low" ? "opacity-10" : intensity === "high" ? "opacity-30" : "opacity-20";
---

<!-- CRT Scanline Overlay -->
<div
  class:list={["fixed inset-0 z-50 pointer-events-none crt-overlay", opacityClass]}
  aria-hidden="true"
></div>

<!-- CRT Vignette -->
<div class="fixed inset-0 z-50 pointer-events-none crt-vignette" aria-hidden="true"></div>

<!-- Moving Scanline Bar (Fallout 4 CRT effect) -->
{showScanlineBar && (
  <div
    class="scanline-bar fixed left-0 right-0 w-full h-24 z-[60] pointer-events-none opacity-20"
    style="background: linear-gradient(0deg, rgba(0,0,0,0) 0%, rgba(19, 236, 19, 0.15) 50%, rgba(0,0,0,0) 100%); bottom: 100%; animation: scanline 10s linear infinite;"
    aria-hidden="true"
  ></div>
)}

<!-- Background Grid -->
<div
  class="fixed inset-0 pointer-events-none z-0 opacity-10"
  style="background-image: linear-gradient(#13ec13 1px, transparent 1px), linear-gradient(90deg, #13ec13 1px, transparent 1px); background-size: 40px 40px;"
  aria-hidden="true"
></div>
